<main class="gradient-background min-vh-100">
  <div class="container py-5">
    <div class="row">
      <!-- Welcome -->
      <div id="welcome" class="col-md-6 mb-4">
        <div class="card card-box-2 wrapper p-4">
          <div class="row justify-content-md-start justify-content-center align-items-center">
            <div class="col-md-12">
              <div class="text-md-start text-center">
                <h3 class="custom fw-medium text-light">¡Hola @if (user !== undefined) { <span class="fw-semibold"> {{user.firstname}}! </span> }</h3>
                <h4 class="fs-5 fw-medium text-light">Bienvenido a tu página de inicio.</h4>
                <p class="text-light">Revisa tus grupos actuales y crea grupos nuevos para gestionar tus gastos compartidos.</p>
              </div>
            </div>
          </div>
          <!-- Boton dentro de la card para mobile -->
          <div class="row justify-content-center mt-3">
            <div class="col-md-12 d-flex align-items-center justify-content-center">
              <div class="text-md-start text-center">
                <button class="btn btn-outline-light d-md-none d-flex align-items-center">
                  <span>Nuevo Grupo</span>
                  <mat-icon fontIcon="group_add" class="ms-2"></mat-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

        <!-- Instructions -->
        <div id="instructions" class="col-md-6 mb-4">
          <div id="carouselInCard" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
            <div class="carousel-inner">
                <div class="carousel-item active">
                  <div class="card card-box-1 wrapper p-4">
                    <h4 class="fs-4 fw-medium text-light">Crea un nuevo grupo</h4>
                    <p class="text-light">Haz click en "Nuevo Grupo" para <strong>añadir nuevos gastos e invitar a tus amigos.</strong></p>
                  </div>
                </div>
                <div class="carousel-item">
                  <div class="card card-box-1 wrapper p-4">
                      <h4 class="fs-4 fw-medium text-light">Tus Grupos</h4>
                      <p class="text-light">Revisa los <strong>grupos que has creado</strong> y en los que <strong>participas como pagador.</strong></p>
                  </div>
                </div>
                <div class="carousel-item">
                  <div class="card card-box-1 wrapper p-4">
                    <h4 class="fs-4 fw-medium text-light">Ver Grupo</h4>
                    <p class="text-light">Visualiza en detalle los <strong>pagos y movimientos de cada grupo.</strong></p>
                  </div>
                </div>
              </div>

              <!-- Boton estilo bento para desktop -->
              <div class="ms-auto me-4">
              <button class="btn btn-outline-light btn-lg d-none d-md-flex align-items-center justify-content-center mt-2 w-100">
                <span>Nuevo Grupo</span>
                <mat-icon fontIcon="group_add" class="ms-2"></mat-icon>
              </button>
              </div>
            </div>
        </div>
        <h3 class="custom text-light d-flex mt-3">Tus grupos</h3> 
      </div>

    
    <!-- Contenido del home -->
    <div class="card card-box-1 p-3">
      <div class="d-flex flex-column">
        <div class="mt-3">
          <ul class="nav nav-tabs">
            <li class="list-group-item" title="Todos tus grupos">
              <a class="nav-link filter-option text-decoration-none" [class.active]="filter==='todos'"
                (click)="updateFilterTable('todos')">Todos</a>
            </li>
            <li class="list-group-item" title="Grupos que administras">
              <a class="nav-link filter-option text-decoration-none" [class.active]="filter==='admin'"
                (click)="updateFilterTable('admin')">Admin</a>
            </li>
            <li class="list-group-item" title="Grupos que no administras">
              <a class="nav-link filter-option text-decoration-none" [class.active]="filter==='member'"
                (click)="updateFilterTable('member')">Pagador</a>
            </li>
          </ul>
        </div>
        <div>
          <!-- Acordeón -->
          <div class="accordion mt-3" id="infoGroupAccordion">
            @if(arrInfoGroups.length > 0)
            {
              @for (infoGroup of arrInfoGroups; track infoGroup.group_id) {
              <app-group-info-card [infoGroup]="infoGroup"></app-group-info-card>
              }
            }@else {
              <div class="d-flex flex-column align-items-center py-5">
                <p class="text-center">No tenemos ningún grupo para mostrarte</p>
                <p class="text-center">¿Quieres crear uno?</p>
                <button class="btn btn-outline-light d-flex d-inline-block mt-3" [routerLink]="['/home/groupform/new']" title="Nuevo grupo">
                  <span>Nuevo Grupo</span><mat-icon fontIcon="group_add" class="ms-2"></mat-icon>
                </button>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</main>